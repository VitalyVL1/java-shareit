package ru.practicum.shareit.booking.dto;

import java.util.Optional;

/**
 * Перечисление возможных статусов (состояний) для фильтрации запросов бронирований.
 * <p>
 * Используется в API для указания того, бронирования с каким статусом должен вернуть сервер.
 * Например, пользователь может запросить все свои бронирования ({@link #ALL}),
 * только текущие ({@link #CURRENT}) или только завершенные ({@link #PAST}).
 * </p>
 */
public enum State {
    /**
     * Все бронирования (без фильтрации по статусу).
     */
    ALL,

    /**
     * Текущие бронирования (начались, но ещё не закончились).
     */
    CURRENT,

    /**
     * Будущие бронирования (ещё не начались).
     */
    FUTURE,

    /**
     * Завершенные бронирования (уже закончились).
     */
    PAST,

    /**
     * Отклоненные бронирования (владелец вещи отклонил запрос).
     */
    REJECTED,

    /**
     * Бронирования, ожидающие подтверждения владельца вещи.
     */
    WAITING;

    /**
     * Преобразует строковое представление статуса в соответствующее значение перечисления {@link State}.
     * <p>
     * Метод используется для обработки входящих строковых параметров из запроса
     * (например, из query-параметра "state") и преобразования их в типобезопасный Enum.
     * Сравнение происходит без учета регистра.
     * </p>
     *
     * @param stringState строковое представление статуса (например, "ALL", "current", "Future")
     * @return {@link Optional}, содержащий {@link State}, если строка соответствует одному из значений перечисления;
     *         пустой {@link Optional}, если соответствий не найдено
     */
    public static Optional<State> from(String stringState) {
        for (State state : values()) {
            if (state.name().equalsIgnoreCase(stringState)) {
                return Optional.of(state);
            }
        }
        return Optional.empty();
    }
}